<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hyu.system.mapper.SysUserMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.hyu.system.domain.SysUser">
        <id     property="userId"         column="id"              />
        <result property="username"       column="username"        />
        <result property="password"       column="password"        />
        <result property="realName"       column="real_name"       />
        <result property="phone"          column="phone"           />
        <result property="email"          column="email"           />
        <result property="userType"       column="user_type"       />
        <result property="status"         column="status"          />
        <result property="avatar"         column="avatar"          />
        <result property="remark"         column="remark"          />
        <result property="createBy"       column="create_by"       />
        <result property="createTime"     column="create_time"     />
        <result property="updateBy"       column="update_by"       />
        <result property="updateTime"     column="update_time"     />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, username, password, real_name, phone, email, user_type, status, avatar,
        remark, create_by, create_time, update_by, update_time
    </sql>

    <!-- 根据用户名查询用户 -->
    <select id="selectUserByUsername" parameterType="String" resultMap="BaseResultMap">
        SELECT <include refid="Base_Column_List"/>
        FROM sys_user
        WHERE username = #{username} AND status = 1
    </select>

    <!-- 根据手机号查询用户 -->
    <select id="selectUserByPhone" parameterType="String" resultMap="BaseResultMap">
        SELECT <include refid="Base_Column_List"/>
        FROM sys_user
        WHERE phone = #{phone} AND status = 1
    </select>

    <!-- 根据邮箱查询用户 -->
    <select id="selectUserByEmail" parameterType="String" resultMap="BaseResultMap">
        SELECT <include refid="Base_Column_List"/>
        FROM sys_user
        WHERE email = #{email} AND status = 1
    </select>

</mapper>